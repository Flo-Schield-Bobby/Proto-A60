(function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(a){this.analyse=c(this.analyse,this),this.decode=c(this.decode,this),this.display=c(this.display,this),this.scan=c(this.scan,this);var d=this;return a=$.extend({constraints:{audio:!1,video:!0},successCallback:function(){},errorCallback:function(){},videoRootElId:"",canvasRootElId:""},a),this.videoRootEl=document.getElementById(a.videoRootElId),this.constraints=a.constraints,this.successCallback=a.successCallback,this.errorCallback=a.errorCallback,this.canvasRootEl=document.getElementById(a.canvasRootElId),this.context=this.canvasRootEl.getContext("2d"),this.context.clearRect(0,0,this.canvasRootEl.width,this.canvasRootEl.height),this.data=this.context.getImageData(0,0,this.canvasRootEl.width,this.canvasRootEl.height),b.callback=function(a){return d.analyse(a),d},this.scan(),this}var d,e,f,g,h,i,j;return j=null,d=null,f=null,g=null,e=null,i=null,h=null,a.prototype.scan=function(){var a=this;return navigator.getMedia(this.constraints,function(b){return a.display(b),a.successCallback.apply(a,[b]),setTimeout(function(){return a.decode()},500)},function(){return a.errorCallback.apply()})},a.prototype.display=function(a){return this.videoRootEl.src=window.URL.createObjectURL(a),this},a.prototype.decode=function(){var a,c=this;this.context.drawImage(this.videoRootEl,0,0);try{b.decode()}catch(d){a=d,console.log(a),setTimeout(function(){return c.decode()},500)}return this},a.prototype.analyse=function(){return this},a}(),navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,b=b||{decode:function(){}},$(function(){var b;return b=new a({videoRootElId:"camera-screen",canvasRootElId:"qr-code-canvas",constraints:{video:!0,audio:!1}})})}).call(this);